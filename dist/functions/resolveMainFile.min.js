"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveMainFile=exports.default=void 0;var _fs=require("fs"),_makeFilepath=_interopRequireDefault(require("./makeFilepath")),_fileExists=_interopRequireDefault(require("./fileExists"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const resolveMainFile=e=>{if(!(0,_fileExists.default)(e)){const t=`${e}.js`;if((0,_fileExists.default)(t))return t;const i=`${e}.mjs`;return(0,_fileExists.default)(i)?i:null}if(e.endsWith(".js")||e.endsWith(".mjs"))return e;const t=(0,_makeFilepath.default)(`${e}.js`);if((0,_fileExists.default)(t))return t;const i=(0,_makeFilepath.default)(`${e}.mjs`);if((0,_fileExists.default)(i))return i;const s=(0,_makeFilepath.default)(e,"package.json");if((0,_fileExists.default)(s)){const t=JSON.parse((0,_fs.readFileSync)(s).toString());if(t.exports)return"string"==typeof t.exports?(0,_makeFilepath.default)(e,t.exports):(0,_makeFilepath.default)(e,t.exports.default);if(t.main)return(0,_makeFilepath.default)(e,t.main)}const l=(0,_makeFilepath.default)(e,"index.js");if((0,_fileExists.default)(l))return l;const a=(0,_makeFilepath.default)(e,"index.mjs");return(0,_fileExists.default)(a)?a:null};exports.resolveMainFile=resolveMainFile;var _default=exports.default=resolveMainFile;