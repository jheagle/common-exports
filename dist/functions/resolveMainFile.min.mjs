import{readFileSync}from"fs";import makeFilepath from"./makeFilepath.mjs";import fileExists from"./fileExists.mjs";export const resolveMainFile=e=>{if(!fileExists(e)){const i=`${e}.js`;if(fileExists(i))return i;const t=`${e}.mjs`;return fileExists(t)?t:null}if(e.endsWith(".js")||e.endsWith(".mjs"))return e;const i=makeFilepath(`${e}.js`);if(fileExists(i))return i;const t=makeFilepath(`${e}.mjs`);if(fileExists(t))return t;const s=makeFilepath(e,"package.json");if(fileExists(s)){const i=JSON.parse(readFileSync(s).toString());if(i.exports)return"string"==typeof i.exports?makeFilepath(e,i.exports):makeFilepath(e,i.exports.default);if(i.main)return makeFilepath(e,i.main)}const r=makeFilepath(e,"index.js");if(fileExists(r))return r;const n=makeFilepath(e,"index.mjs");return fileExists(n)?n:null};export default resolveMainFile;