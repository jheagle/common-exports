"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveModule=exports.default=void 0,require("core-js/modules/esnext.async-iterator.filter.js"),require("core-js/modules/esnext.iterator.constructor.js"),require("core-js/modules/esnext.iterator.filter.js"),require("core-js/modules/esnext.async-iterator.map.js"),require("core-js/modules/esnext.iterator.map.js");var _fs=require("fs"),_strAfterLast=_interopRequireDefault(require("../utilities/strAfterLast")),_makeFilepath=_interopRequireDefault(require("./makeFilepath")),_fileExists=_interopRequireDefault(require("./fileExists")),_regexEscape=_interopRequireDefault(require("./regexEscape")),_strBeforeLast=_interopRequireDefault(require("../utilities/strBeforeLast"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const modulesDirectory="node_modules",resolveModule=(e,t,r="")=>{if(r===e)return null;e=(0,_makeFilepath.default)(e),r||(r=e),t.startsWith("#")&&(t=t.slice(1),r=(0,_makeFilepath.default)(r,"vendor")),t.startsWith("./")&&(t=t.slice(2)),t.startsWith("../")&&(t=t.slice(3));let s=(0,_makeFilepath.default)(r,(0,_strBeforeLast.default)(t,"/"));if((0,_fileExists.default)(s)){let e=t.includes("/")?(0,_strAfterLast.default)(t,"/"):t;e=(0,_makeFilepath.default)(e),e=(0,_regexEscape.default)(e),e.includes("\\$\\{")&&(e=e.replace(/(\\\$\\{.+\\})+/g,".+"));const r=new RegExp(`^${e}$`),l=(0,_fs.readdirSync)(s).filter((e=>r.test(e)));if(l.length)return l.map((e=>(0,_makeFilepath.default)(s,e))).filter(_fileExists.default)}return"node_modules"!==(0,_strAfterLast.default)(r,"/")||(r=(0,_makeFilepath.default)(r,"../../"))!==e&&r?resolveModule(e,t,(0,_makeFilepath.default)(r,"node_modules")):[]};exports.resolveModule=resolveModule;var _default=exports.default=resolveModule;